{% extends "base.html" %}

{% block title %}Sample Gallery - VideoSense AI{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="main-container">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-primary mb-3">
                    <i class="fas fa-play-circle me-3"></i>Sample Gallery
                </h1>
                <p class="lead text-muted">
                    Explore real examples of <span class="ai-processing-text">AI-powered</span> video summarization across different industries
                </p>
            </div>

            <!-- Filter Controls -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary active" onclick="filterSamples('all')">
                            All Categories
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterSamples('Business')">
                            Business
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterSamples('Education')">
                            Education
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterSamples('Entertainment')">
                            Entertainment
                        </button>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <select class="form-select d-inline-block w-auto" onchange="sortSamples(this.value)">
                        <option value="title">Sort by Title</option>
                        <option value="category">Sort by Category</option>
                        <option value="duration">Sort by Duration</option>
                        <option value="compression">Sort by Compression</option>
                    </select>
                </div>
            </div>

            <!-- Stats Overview -->
            <div class="row mb-5">
                <div class="col-md-3">
                    <div class="stats-card">
                        <h3 id="totalSamples">12</h3>
                        <small>Sample Videos</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card">
                        <h3 id="totalCategories">4</h3>
                        <small>Categories</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card">
                        <h3 id="avgCompression">25x</h3>
                        <small>Avg Compression</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card">
                        <h3 id="totalSaved">2.5h</h3>
                        <small>Time Saved</small>
                    </div>
                </div>
            </div>

            <!-- Sample Videos Grid -->
            <div class="row" id="samplesGrid">
                <!-- Business Samples -->
                <div class="col-lg-6 mb-4 sample-card" data-category="Business">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-briefcase me-2 text-primary"></i>
                                Team Strategy Meeting
                            </h5>
                            <span class="badge bg-primary">Business</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">Original Duration</small>
                                    <div class="fw-bold">9:56</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Summary Duration</small>
                                    <div class="fw-bold text-success">0:16</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Key Segments</small>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">1. Introduction</span>
                                    <span class="badge bg-success">9/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">2. Main Content</span>
                                    <span class="badge bg-primary">8/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">3. Conclusion</span>
                                    <span class="badge bg-secondary">7/10</span>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="previewSample('business_meeting_01')">
                                    <i class="fas fa-play me-2"></i>Preview Videos
                                </button>
                                <button class="btn btn-success" onclick="downloadSample('business_meeting_01')">
                                    <i class="fas fa-download me-2"></i>Download Summary
                                </button>
                                <button class="btn btn-outline-primary" onclick="viewSampleDetails('business_meeting_01')">
                                    <i class="fas fa-info-circle me-2"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4 sample-card" data-category="Business">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-chalkboard-teacher me-2 text-primary"></i>
                                Employee Training Session
                            </h5>
                            <span class="badge bg-primary">Business</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">Original Duration</small>
                                    <div class="fw-bold">10:54</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Summary Duration</small>
                                    <div class="fw-bold text-success">0:22</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Key Segments</small>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">1. Safety Protocols</span>
                                    <span class="badge bg-success">9/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">2. Best Practices</span>
                                    <span class="badge bg-primary">8/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">3. Q&A Session</span>
                                    <span class="badge bg-secondary">7/10</span>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="previewSample('training_session_01')">
                                    <i class="fas fa-play me-2"></i>Preview Videos
                                </button>
                                <button class="btn btn-success" onclick="downloadSample('training_session_01')">
                                    <i class="fas fa-download me-2"></i>Download Summary
                                </button>
                                <button class="btn btn-outline-primary" onclick="viewSampleDetails('training_session_01')">
                                    <i class="fas fa-info-circle me-2"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Education Samples -->
                <div class="col-lg-6 mb-4 sample-card" data-category="Education">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-university me-2 text-success"></i>
                                Computer Science Lecture
                            </h5>
                            <span class="badge bg-success">Education</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">Original Duration</small>
                                    <div class="fw-bold">0:15</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Summary Duration</small>
                                    <div class="fw-bold text-success">0:16</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Key Concepts</small>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">1. ML Algorithms</span>
                                    <span class="badge bg-success">9/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">2. Data Structures</span>
                                    <span class="badge bg-primary">8/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">3. Applications</span>
                                    <span class="badge bg-secondary">7/10</span>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="previewSample('university_lecture_01')">
                                    <i class="fas fa-play me-2"></i>Preview Videos
                                </button>
                                <button class="btn btn-success" onclick="downloadSample('university_lecture_01')">
                                    <i class="fas fa-download me-2"></i>Download Summary
                                </button>
                                <button class="btn btn-outline-primary" onclick="viewSampleDetails('university_lecture_01')">
                                    <i class="fas fa-info-circle me-2"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4 sample-card" data-category="Education">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-film me-2 text-success"></i>
                                Climate Change Documentary
                            </h5>
                            <span class="badge bg-success">Education</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">Original Duration</small>
                                    <div class="fw-bold">14:48</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Summary Duration</small>
                                    <div class="fw-bold text-success">0:17</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Key Topics</small>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">1. Climate Data</span>
                                    <span class="badge bg-success">9/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">2. Impact Analysis</span>
                                    <span class="badge bg-primary">8/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">3. Solutions</span>
                                    <span class="badge bg-secondary">7/10</span>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="previewSample('documentary_01')">
                                    <i class="fas fa-play me-2"></i>Preview Videos
                                </button>
                                <button class="btn btn-success" onclick="downloadSample('documentary_01')">
                                    <i class="fas fa-download me-2"></i>Download Summary
                                </button>
                                <button class="btn btn-outline-primary" onclick="viewSampleDetails('documentary_01')">
                                    <i class="fas fa-info-circle me-2"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Entertainment Samples -->
                <div class="col-lg-6 mb-4 sample-card" data-category="Entertainment">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-microphone me-2 text-warning"></i>
                                Tech Podcast Episode
                            </h5>
                            <span class="badge bg-warning">Entertainment</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">Original Duration</small>
                                    <div class="fw-bold">9:30</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Summary Duration</small>
                                    <div class="fw-bold text-success">0:25</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Highlights</small>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">1. Tech Trends</span>
                                    <span class="badge bg-success">9/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">2. Industry Insights</span>
                                    <span class="badge bg-primary">8/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">3. Future Predictions</span>
                                    <span class="badge bg-secondary">7/10</span>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="previewSample('podcast_01')">
                                    <i class="fas fa-play me-2"></i>Preview Videos
                                </button>
                                <button class="btn btn-success" onclick="downloadSample('podcast_01')">
                                    <i class="fas fa-download me-2"></i>Download Summary
                                </button>
                                <button class="btn btn-outline-primary" onclick="viewSampleDetails('podcast_01')">
                                    <i class="fas fa-info-circle me-2"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4 sample-card" data-category="Entertainment">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-user-tie me-2 text-warning"></i>
                                CEO Interview
                            </h5>
                            <span class="badge bg-warning">Entertainment</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted">Original Duration</small>
                                    <div class="fw-bold">9:15</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Summary Duration</small>
                                    <div class="fw-bold text-success">0:19</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Key Moments</small>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">1. Company Vision</span>
                                    <span class="badge bg-success">9/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">2. Growth Strategy</span>
                                    <span class="badge bg-primary">8/10</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center py-1">
                                    <span class="small">3. Market Outlook</span>
                                    <span class="badge bg-secondary">7/10</span>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="previewSample('interview_01')">
                                    <i class="fas fa-play me-2"></i>Preview Videos
                                </button>
                                <button class="btn btn-success" onclick="downloadSample('interview_01')">
                                    <i class="fas fa-download me-2"></i>Download Summary
                                </button>
                                <button class="btn btn-outline-primary" onclick="viewSampleDetails('interview_01')">
                                    <i class="fas fa-info-circle me-2"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Call to Action -->
            <div class="text-center mt-5">
                <div class="card bg-light">
                    <div class="card-body py-5">
                        <h3 class="mb-3">Ready to Create Your Own Summary?</h3>
                        <p class="lead mb-4">Upload your video and let our AI create intelligent summaries in minutes</p>
                        <div class="btn-group" role="group">
                            <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg">
                                <i class="fas fa-upload me-2"></i>Upload Your Video
                            </a>
                            <button class="btn btn-outline-secondary btn-lg" data-bs-toggle="modal" data-bs-target="#behindScenesModal">
                                <i class="fas fa-magic me-2"></i>Behind the Scenes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Sample Details Modal -->
<div class="modal fade" id="sampleModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-info-circle me-2"></i>Sample Details
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="sampleModalBody">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function filterSamples(category) {
    const cards = document.querySelectorAll('.sample-card');
    const buttons = document.querySelectorAll('.btn-group .btn');
    
    // Update button states
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Filter cards
    cards.forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}

function sortSamples(criteria) {
    const grid = document.getElementById('samplesGrid');
    const cards = Array.from(grid.children);
    
    cards.sort((a, b) => {
        // Simple sorting logic - in real app would use actual data
        const titleA = a.querySelector('h5').textContent;
        const titleB = b.querySelector('h5').textContent;
        return titleA.localeCompare(titleB);
    });
    
    // Re-append sorted cards
    cards.forEach(card => grid.appendChild(card));
}

function downloadSample(sampleId) {
    // In real app, this would download the actual sample
    window.location.href = `/samples/download/${sampleId}`;
}

function previewSample(sampleId) {
    // Navigate to sample preview page
    window.location.href = `/sample_preview/${sampleId}`;
}

function viewSampleDetails(sampleId) {
    const modalBody = document.getElementById('sampleModalBody');
    
    // Mock sample details - in real app would fetch from API
    const sampleData = {
        'business_meeting_01': {
            title: 'Team Strategy Meeting',
            category: 'Business',
            originalDuration: '9:56',
            summaryDuration: '0:16',
            compression: '37x',
            segments: [
                { topic: 'Introduction', time: '1:58-2:00', importance: 9, reason: 'Opening segment' },
                { topic: 'Main Content', time: '5:02-5:03', importance: 8, reason: 'Key discussion points' },
                { topic: 'Conclusion', time: '7:46-8:01', importance: 7, reason: 'Action items and next steps' }
            ]
        }
    };
    
    const sample = sampleData[sampleId] || sampleData['business_meeting_01'];
    
    modalBody.innerHTML = `
        <div class="row mb-4">
            <div class="col-md-6">
                <h6>Video Information</h6>
                <table class="table table-sm">
                    <tr><td>Title:</td><td>${sample.title}</td></tr>
                    <tr><td>Category:</td><td>${sample.category}</td></tr>
                    <tr><td>Original Duration:</td><td>${sample.originalDuration}</td></tr>
                    <tr><td>Summary Duration:</td><td>${sample.summaryDuration}</td></tr>
                    <tr><td>Compression Ratio:</td><td>${sample.compression}</td></tr>
                </table>
            </div>
            <div class="col-md-6">
                <h6>AI Analysis</h6>
                <table class="table table-sm">
                    <tr><td>Segments Identified:</td><td>${sample.segments.length}</td></tr>
                    <tr><td>Average Importance:</td><td>${(sample.segments.reduce((sum, seg) => sum + seg.importance, 0) / sample.segments.length).toFixed(1)}/10</td></tr>
                    <tr><td>Processing Time:</td><td>~2 minutes</td></tr>
                    <tr><td>AI Model:</td><td>GPT-3.5 + Whisper</td></tr>
                </table>
            </div>
        </div>
        
        <h6>Detailed Segments</h6>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Topic</th>
                        <th>Time Range</th>
                        <th>Importance</th>
                        <th>Reason</th>
                    </tr>
                </thead>
                <tbody>
                    ${sample.segments.map((seg, i) => `
                        <tr>
                            <td>${i + 1}</td>
                            <td><span class="badge bg-secondary">${seg.topic}</span></td>
                            <td>${seg.time}</td>
                            <td><span class="badge bg-primary">${seg.importance}/10</span></td>
                            <td class="small">${seg.reason}</td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
        
        <div class="text-center mt-4">
            <button class="btn btn-success me-2" onclick="downloadSample('${sampleId}')">
                <i class="fas fa-download me-2"></i>Download This Summary
            </button>
            <button class="btn btn-outline-primary" onclick="window.location.href='{{ url_for('index') }}'">
                <i class="fas fa-magic me-2"></i>Create Similar Summary
            </button>
        </div>
    `;
    
    new bootstrap.Modal(document.getElementById('sampleModal')).show();
}
</script>
{% endblock %}
